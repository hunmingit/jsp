<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="org.joonzis.mybatis.member"> <!-- 경로 표기법이 클래스명 표기법처럼 사용된다! -->
	<!-- 
		mapper에서는 ?(물음표)를 사용할 수 없다.
		대신 전달한 파라미터의 이름은 #{}을 통해 적는다.
		sql문 뒤에 ;(세미콜론)이 없다.
	 -->
	
	<!-- 
		각 태그 속성
		1. id : id를 통해서 sql문을 선택 (임의로 결정 가능)
		2. parameterType : 매개변수의 타입 “어떤 타입의 값을 SQL로 보낼까?”
		3. resultType : 리턴 데이터의 타입 (풀 패키지로 작성) "SELECT 결과를 어떤 객체로 만들까?"
			- insert, update, delete의 경우 무조건 int 형식이기 때문에 작성할 필요가 없다
	 -->
	 
	 <select id="select_all" resultType="org.joonzis.ex.MemberVO"> 
	 <!-- DAO에 있는 select_all이랑 연결, parameterType="" 파라미터 속성(int, string)	
	 		resultType="org.joonzis.ex.MemberVO" -->
	 															 
	 	select * from member order by idx
	 </select>
	 <!-- insert 타입은 int로 결과가 정해져있기 때문에 resultType을 작성할 필요 없다. 3개 타입 다 쓰는 경우도 있지만 2개만 쓰는경우도 있디. -->
	 <!-- vo를 받았지만 vo안에있는 필드명을 쓰면 알아서 getter로 가져온다 변수명을 받으면 그냥 변수명-->
	 <insert id="insert" parameterType="org.joonzis.ex.MemberVO">
	 	insert into member values(
	 		member_seq.nextval,
	 		#{id},
	 		#{pw},
	 		#{name},
	 		#{age},
	 		#{addr},
	 		sysdate 		
	 	)
	 </insert>
	 <!-- id로 회원 검색 -->
	 <select id="select_one" parameterType="String" resultType="org.joonzis.ex.MemberVO">
	 	SELECT * FROM member WHERE id = #{id}
	 </select>
	
	 <delete id="remove" parameterType="org.joonzis.ex.MemberVO">
	 	delete from member where id = #{id} and pw = #{pw}
	 </delete>
	 
	 <select id="update_page" parameterType="org.joonzis.ex.MemberVO" resultType="org.joonzis.ex.MemberVO"> 
	 	SELECT * FROM member WHERE id=#{id} and pw=#{pw}
	 </select>
	 
	 <update id="update" parameterType="org.joonzis.ex.MemberVO">
	 	update member set pw=#{pw}, name=#{name}, age=#{age}, addr=#{addr} where idx = #{idx}
	 </update>
	 
</mapper>






